#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <sys/stat.h>

int main(int argc, char *argv){

  create_power_tests();

}

char* create_dir(unsigned int i, char* dir_path);

write_text(FILE* file, char body, unsigned long size){

  int k = 0;
  
  for(k; k<size; k++)
    {
      putc(body, file);
    }
}

write_pattern(FILE* file, char body, char end, unsigned long size){

  int k = 0;
  
  for(k; k<size-1; k++)
    {
      putc(body, file);
    }

  putc(end, file);
}


create_power_tests(){
  int total_count = 0;
  int k;
  unsigned long desired_length;

  //calculate how many characters per text/pattern
  for(k = 2; k <= 10; k += 2)
    {
      desired_length = pow(10,k);
      // printf("Desired Len: %lu\nPattern Len: %d\nText Len: %d\n", desired_length, l, m);
      create_test(total_count, 1, desired_length/1);
      create_test(total_count+1, 2, desired_length/2);
      create_test(total_count+2, 4, desired_length/4);
      create_test(total_count+3, 5, desired_length/5);
      total_count += 4;
    }
}

create_test(int test_num, unsigned long pat_len, unsigned long text_len){
  char* dir_name;
  char text_file_path[200];
  char pat_file_path[200];
  FILE* text_file;
  FILE* pattern_file;
    
  dir_name = (char*) malloc (100);
  dir_name = create_dir(test_num, dir_name);

  sprintf (text_file_path, "%s/text.txt", dir_name);
  sprintf (pat_file_path, "%s/pattern.txt", dir_name);

  text_file = fopen(text_file_path, "w+");
  pattern_file = fopen(pat_file_path, "w+");

  write_text(text_file, 'A', text_len);
  write_pattern(pattern_file, 'A', 'B', pat_len);

  fclose(text_file);
  fclose(pattern_file);
}

char* create_dir(unsigned int i, char * dir_path){

#ifdef DOS
  sprintf (dir_path, "inputs\\test%u\\", i);
#else
  sprintf (dir_path, "inputs/test%u/", i);
#endif 

  mode_t process_mask = umask(0);
  int result_code = mkdir(dir_path, S_IRWXU);
  umask(process_mask);

  return dir_path;

}
